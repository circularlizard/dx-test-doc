<!-- Elements added to main will be displayed on all pages -->

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.2">
    
    
      
        <title>Conclusion - DX Test Site</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.f7951f6f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DX Test Site" class="md-header__button md-logo" aria-label="DX Test Site" data-md-component="logo">
      
  <img src="../../assets/dx_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DX Test Site
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Conclusion
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../what%27s-new/new_cf17/" class="md-tabs__link">
        What's new
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Kube
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DX Test Site" class="md-nav__button md-logo" aria-label="DX Test Site" data-md-component="logo">
      
  <img src="../../assets/dx_logo.png" alt="logo">

    </a>
    DX Test Site
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          What's new
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="What's new" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          What's new
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_cf17/" class="md-nav__link">
        What's new in CF17?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_cf171/" class="md-nav__link">
        What's new in CF171? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_cf172/" class="md-nav__link">
        What's new in CF172? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_cf173/" class="md-nav__link">
        What's new in CF173? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_cf18/" class="md-nav__link">
        What's new in CF18? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_noncf18/" class="md-nav__link">
        What's new in CF18?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf182/" class="md-nav__link">
        What's new in CF182? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf183/" class="md-nav__link">
        What's new in CF183? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf184/" class="md-nav__link">
        What's new in CF184? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf19/" class="md-nav__link">
        What's new in CF19? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_noncf19/" class="md-nav__link">
        What's new with CF19?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf191/" class="md-nav__link">
        What's new in CF191? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf192/" class="md-nav__link">
        What's new in CF192? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf193/" class="md-nav__link">
        What's new in CF193? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf194/" class="md-nav__link">
        What's new in CF194? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf195/" class="md-nav__link">
        What's new in CF195? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf196/" class="md-nav__link">
        What's new in CF196? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_noncf196/" class="md-nav__link">
        What's new in CF196?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf197/" class="md-nav__link">
        What's new in CF197? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_noncf197/" class="md-nav__link">
        What's new with CF197?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf198/" class="md-nav__link">
        What's new in CF198? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_noncf198/" class="md-nav__link">
        What's new with CF198?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/newcf199/" class="md-nav__link">
        What's new in CF199? Containers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_noncf199/" class="md-nav__link">
        What's new with CF199?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../what%27s-new/new_cf181/" class="md-nav__link">
        What's new in CF181? Containers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Kube</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Kube" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Kube
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-next-deploy/" class="md-nav__link">
        Deployment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-next-operation/" class="md-nav__link">
        Operations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-next-runtime-log-levels/" class="md-nav__link">
        Runtime log levels
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-next-runtime-log-levels-dbha/" class="md-nav__link">
        Runtime log levels - DBHA
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" data-md-state="indeterminate" type="checkbox" id="__nav_3_6" checked>
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_6">
          Prometheus
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Prometheus" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Prometheus
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Prometheus/k8s-next-nodejs-prom/" class="md-nav__link">
        NodeJS Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Prometheus/k8s-next-postgres-prom/" class="md-nav__link">
        Postgres Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Prometheus/k8s-next-prom/" class="md-nav__link">
        Prometheus
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" data-md-state="indeterminate" type="checkbox" id="__nav_3_7" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_7">
          Migration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Migration" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Migration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Migration/k8s-next-migrate-from-operator/" class="md-nav__link">
        Operator migration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Migration/k8s-next-migrate-detail-core/" class="md-nav__link">
        Operator migration - core
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Migration/k8s-next-migrate-detail-dam/" class="md-nav__link">
        Operator migration - DAM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Migration/k8s-next-property-migration/" class="md-nav__link">
        Operator property migration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-next-update/" class="md-nav__link">
        Updating
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-next-undeploy/" class="md-nav__link">
        Undeploy
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Conclusion
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Conclusion
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-summary" class="md-nav__link">
    Design Summary
  </a>
  
    <nav class="md-nav" aria-label="Design Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helm-as-the-primary-deployment-method" class="md-nav__link">
    Helm as the primary deployment method
  </a>
  
    <nav class="md-nav" aria-label="Helm as the primary deployment method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-controller-with-focus-on-operationcontroller-tasks" class="md-nav__link">
    Runtime Controller with focus on operation/controller tasks
  </a>
  
    <nav class="md-nav" aria-label="Runtime Controller with focus on operation/controller tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_1" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#milestone-3" class="md-nav__link">
    Milestone 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmaps-as-configuration-backbone" class="md-nav__link">
    ConfigMaps as configuration backbone
  </a>
  
    <nav class="md-nav" aria-label="ConfigMaps as configuration backbone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_2" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#containers-need-to-be-more-self-sustaining" class="md-nav__link">
    Containers need to be more self-sustaining
  </a>
  
    <nav class="md-nav" aria-label="Containers need to be more self-sustaining">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_3" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vanilla-as-possible-custom-as-needed" class="md-nav__link">
    Vanilla as possible, Custom as needed
  </a>
  
    <nav class="md-nav" aria-label="Vanilla as possible, Custom as needed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_4" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-logging-using-kubernetes-logs" class="md-nav__link">
    Enable logging using Kubernetes logs
  </a>
  
    <nav class="md-nav" aria-label="Enable logging using Kubernetes logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_5" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#establish-a-metricsmonitoring-stack" class="md-nav__link">
    Establish a metrics/monitoring stack
  </a>
  
    <nav class="md-nav" aria-label="Establish a metrics/monitoring stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_6" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolling-update" class="md-nav__link">
    Rolling update
  </a>
  
    <nav class="md-nav" aria-label="Rolling update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_7" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#milestone-2" class="md-nav__link">
    Milestone 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undeploy" class="md-nav__link">
    Undeploy
  </a>
  
    <nav class="md-nav" aria-label="Undeploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_8" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operatorruntime-controller-technology-stack" class="md-nav__link">
    Operator/Runtime Controller technology stack
  </a>
  
    <nav class="md-nav" aria-label="Operator/Runtime Controller technology stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_9" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../k8s-next-helm-incubator-values/" class="md-nav__link">
        Incubator configurations
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#design-summary" class="md-nav__link">
    Design Summary
  </a>
  
    <nav class="md-nav" aria-label="Design Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helm-as-the-primary-deployment-method" class="md-nav__link">
    Helm as the primary deployment method
  </a>
  
    <nav class="md-nav" aria-label="Helm as the primary deployment method">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime-controller-with-focus-on-operationcontroller-tasks" class="md-nav__link">
    Runtime Controller with focus on operation/controller tasks
  </a>
  
    <nav class="md-nav" aria-label="Runtime Controller with focus on operation/controller tasks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_1" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#milestone-3" class="md-nav__link">
    Milestone 3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configmaps-as-configuration-backbone" class="md-nav__link">
    ConfigMaps as configuration backbone
  </a>
  
    <nav class="md-nav" aria-label="ConfigMaps as configuration backbone">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_2" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#containers-need-to-be-more-self-sustaining" class="md-nav__link">
    Containers need to be more self-sustaining
  </a>
  
    <nav class="md-nav" aria-label="Containers need to be more self-sustaining">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_3" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vanilla-as-possible-custom-as-needed" class="md-nav__link">
    Vanilla as possible, Custom as needed
  </a>
  
    <nav class="md-nav" aria-label="Vanilla as possible, Custom as needed">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_4" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enable-logging-using-kubernetes-logs" class="md-nav__link">
    Enable logging using Kubernetes logs
  </a>
  
    <nav class="md-nav" aria-label="Enable logging using Kubernetes logs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_5" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#establish-a-metricsmonitoring-stack" class="md-nav__link">
    Establish a metrics/monitoring stack
  </a>
  
    <nav class="md-nav" aria-label="Establish a metrics/monitoring stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_6" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rolling-update" class="md-nav__link">
    Rolling update
  </a>
  
    <nav class="md-nav" aria-label="Rolling update">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_7" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#milestone-2" class="md-nav__link">
    Milestone 2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#undeploy" class="md-nav__link">
    Undeploy
  </a>
  
    <nav class="md-nav" aria-label="Undeploy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_8" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#operatorruntime-controller-technology-stack" class="md-nav__link">
    Operator/Runtime Controller technology stack
  </a>
  
    <nav class="md-nav" aria-label="Operator/Runtime Controller technology stack">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#milestone-1_9" class="md-nav__link">
    Milestone 1
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  <h1>Conclusion</h1>

<table>
<thead>
<tr>
<th>Status</th>
<th>Date</th>
</tr>
</thead>
<tbody>
<tr>
<td><span className="dx-good"><strong>APPROVED</strong></span></td>
<td><a href="https://pages.git.cwp.pnp-hcl.com/Team-Q/development-doc/architecture-community/2021-04-29">29th of April 2021</a></td>
</tr>
</tbody>
</table>
<h2 id="introduction">Introduction</h2>
<p>This document compiles all the outcomes of the different design and PoC documents that have been created for our Kubernetes Next Deployment. Each section might contain one or multiple milestones. All sections of the same milestone should be considered as a new "release" of the Kubernetes Next strategy.</p>
<h2 id="design-summary">Design Summary</h2>
<h3 id="helm-as-the-primary-deployment-method">Helm as the primary deployment method</h3>
<p>We want to leverage Helm as our primary way of deployment. Helm will exactly define what resources are being created during the deployment. Resources in our deployment will ideally <strong>only</strong> be created or deleted with Helm. Update and Rollback tasks would be issued using Helm as well.</p>
<p>The Helm chart will contain suitable default settings for a default deployment and also allow customers to customize as much of the deployment as possible for their needs. All the configuration will be determined by <code>values.yaml</code> - as per the Helm standard.</p>
<p>DXCTL would still be an option for customers who don't want to use Helm. The deployment procedure that DXCTL will use will be directly and programmatically derived from our Helm chart, thus enabling the Helm chart to be our <em>single point of truth</em> regarding deployment structure.</p>
<h4 id="milestone-1">Milestone 1</h4>
<p><strong>Summary</strong><br />
Providing a simple, fresh deployment via Helm.<br />
<strong>Limitations</strong><br />
- no official support for other ambassadors, OS-routes,... to reduce test effort
- dxctl as a deployment option will follow in a later milestone</p>
<h3 id="runtime-controller-with-focus-on-operationcontroller-tasks">Runtime Controller with focus on operation/controller tasks</h3>
<p>Based on <a href="https://www.redhat.com/en/topics/containers/what-is-a-kubernetes-operator">What is a Kube Operator</a> we are not building an operator but a runtime controller. The wording needs to be precise here since the term <em>operator</em> implies certain functionalities which we are explicitly avoiding with a runtime controller.</p>
<p>Instead of the focus on deploying and reconciling resources with a CRD, the runtime controller will focus on operational topics. Part of this is that it should not have to take care of application logic, that ideally should be handled by our applications themselves. The runtime controller should not act as a mitigation strategy for lack of application capabilities, but rather help with application-specific tasks and behaviors. </p>
<p>This would include e.g. automatic rollout of configuration changes from ConfigMaps, verification of Kubernetes resource changes, overall health metrics, support during backup and restore procedures.</p>
<h4 id="milestone-1_1">Milestone 1</h4>
<p><strong>Summary</strong><br />
- Create a new runtime controller with
  - DAM persistence RW/RO failover
  - Autorollout config changes via Pod-Recycle</p>
<ul>
<li>Configuration changes via Helm</li>
<li>Enable (disable) services like DAM</li>
<li>Service configurations (DAM file size limits, CORS,..)</li>
<li>Scaling Settings</li>
<li>Horizontal Pod Autoscaler</li>
<li>SSL certificate management for Ambassador and services</li>
<li>DX Admin credential management (Secrets)</li>
</ul>
<p><strong>Limitations</strong>
- Deployment cannot run old operator and new runtime controller at the same time
- SSL certificate management will only cover shipping the current certificate</p>
<h4 id="milestone-3">Milestone 3</h4>
<p><strong>Summary</strong><br />
- auto renewal of interservice SSL certificates</p>
<h3 id="configmaps-as-configuration-backbone">ConfigMaps as configuration backbone</h3>
<p>Since CRDs are cluster-wide resources that require special care (e.g. versioning), we will go with ConfigMaps as our single way of passing configuration values.
CRDs also cannot be updated using Helm, which already poses issues for our SoFy deployments.</p>
<p>Validation of ConfigMaps could be achieved by using VerificationHooks that call the runtime controller for sign-off on changes.</p>
<h4 id="milestone-1_2">Milestone 1</h4>
<p><strong>Summary</strong><br />
Changes in ConfigMaps will be rolled out automatically by the runtime controller since our Containers are consuming ConfigMap values only on startup.</p>
<p><strong>Limitations</strong>
- No verification Hooks</p>
<h3 id="containers-need-to-be-more-self-sustaining">Containers need to be more self-sustaining</h3>
<p>Our applications, especially the stateful ones, need to be improved to behave more naturally in a Kubernetes / Containerized Environment. This is especially true for DX Core. </p>
<p>Currently, the operator mainly defines how DX Core starts, behaves and updates. Some of this will have to go into the DX Core container and away from the newly planned runtime controller.</p>
<h4 id="milestone-1_3">Milestone 1</h4>
<p><strong>Summary</strong><br />
DX-Core will become more self-aware. By definition of kube, containers have the naming scheme &lt;pod-name&gt;-&lt;incrementing integer&gt; like <code>dx-core-0</code> to <code>dx-core-(n-1)</code> where <code>n</code> is the number of Pods.  </p>
<p><code>dx-core-0</code> will be the first core pod created and therefore:
- run initialization of the profile
- run db transfer for multi-pod environments</p>
<p>All other pods will not start until:
- init is done
- db transfer has happened
  - This logic can apply in kube and docker-compose environments if we apply the same name schema to the pods/containers.</p>
<p>After initialization, pods will be notified (by Helm or the Runtime Controller) of config changes via a <code>checksum</code> environment variable. When any pod starts it will compare this value to the config checksum value stored on the shared profile persistent volume. If the value has changed, then the pod will apply the configuration changes and afterwards update the value in the profile. Because of the order in which kube recycles pods in a stateful set when the spec changes, the pod making the changes should in practice always be <code>dx-core-(n-1)</code>.</p>
<p><strong>Limitations</strong>
- providing a docker-compose file is a stretch goal</p>
<h3 id="vanilla-as-possible-custom-as-needed">Vanilla as possible, Custom as needed</h3>
<p>To keep the support for multiple Kubernetes platforms as easy as possible and the deployment maintainable for us, we want to use as few Kubernetes flavour-specific resources as possible. Furthermore we want to leverage as much as possible of the OOB functionality that Kubernetes provides for our applications regarding deployments, updates, scaling etc.</p>
<p>This would also mean the we try to get away from seemingly different deployment behaviors on different flavours, like Openshift vs GKE.</p>
<h4 id="milestone-1_4">Milestone 1</h4>
<p><strong>Summary</strong><br />
Dropping the support of OS routes for Kubernetes Next deployments. Still relying on shared volumes where provided, NFS-Containers as a workaround where needed.</p>
<p><strong>Limitations</strong>
- tbd</p>
<h3 id="enable-logging-using-kubernetes-logs">Enable logging using Kubernetes logs</h3>
<p>We will use the sidecar container concept to expose as many logs from DX and its applications as possible, so that customers can directly use Kubernetes standard tools to retrieve them.</p>
<p>In the future we could provide a fully fledged logging stack, that uses this logging concept and provides customers with proper logfile management.</p>
<h4 id="milestone-1_5">Milestone 1</h4>
<p>Not considered in this milestone.</p>
<h3 id="establish-a-metricsmonitoring-stack">Establish a metrics/monitoring stack</h3>
<p>We will expose application-specific metrics in our containers that can easily be consumed by software like Prometheus and allows customers to establish proper monitoring.</p>
<p>In the future we could also provide our own monitoring stack allowing customers to easily see the current status of their deployment.</p>
<h4 id="milestone-1_6">Milestone 1</h4>
<p>Not considered in this milestone.</p>
<h3 id="rolling-update">Rolling update</h3>
<p>We will provide a rolling upgrade capability so customers can easily update their deployment. A Rolling update does not imply a deployment with zero downtime for all features. However zero downtime is possible for rendering.</p>
<h4 id="milestone-1_7">Milestone 1</h4>
<p>Not considered in this milestone since there is nothing to update from.</p>
<h4 id="milestone-2">Milestone 2</h4>
<p><strong>Summary</strong><br />
By design kube always updates Statefulsets by picking the pod with the highest number first. In all other scenarios kube picks a random pod. Pods are always upgraded one at a time. Once this pod is ready, the next pod will be upgraded.</p>
<p>DAM is self-aware of its own updates. If a database change is needed, DAM will take care of it based of the release-to-release migration.
1. Kube recycles pod with new image - if no DB change is necessary proceed with step 4.
2. The new pod is initializing release-to-release migration.
3. The new pod is performing the release-to-release migration.
4. Once the migration is done it marks itself ready via ready-probe.
5. Kube updates the next pod with the new container image.
6. Kube updates the next pod until there are none on the old image version.</p>
<p><img alt="DAM update" src="../conclusion/rolling_update_dam.png" /></p>
<p>Core image will be modified to support rolling updates. This will not change the core build itself but only the wrapping container.
1. Kube recycles pod with new image
2. Pod will create a new, cloned wp_profile directory on the shared volume
3. Pod will switch its own symlink from wp_profile to the cloned, versioned wp_profile
4. Pod will perform the actual upgrade and marks itself ready via ready-probe
5. Kube updates the next pod.
6. Pod checks if the new wp_profile directory exists and adjusts own symlink prior to startup
7. repeat steps 5 and 6 until there are no further pods on the old image</p>
<p><img alt="Core update" src="../conclusion/rolling_update_core.png" /></p>
<p>The following flowcharts give more detail:</p>
<p><img alt="startNative.sh" src="../conclusion/Kube-Next-Core-Pod-Startup-Flow-checkInitProfileNew.png" />
<img alt="checkInitUpdateProfile.sh" src="../conclusion/Kube-Next-Core-Pod-Startup-Flow-checkInitProfileNew.png" /></p>
<p><strong>Limitations</strong>
- helm only upgrade
- no rollback possible
- stick with shared volume
- writes for DAM will have a downtime
- wp_profile changes from old core pods might be lost during upgrade</p>
<h3 id="undeploy">Undeploy</h3>
<h4 id="milestone-1_8">Milestone 1</h4>
<p><strong>Summary</strong><br />
Use <code>helm uninstall</code> to remove the deployment. PVs will not be removed.</p>
<p><strong>Limitations</strong>
- we do not clean up parts from the current Kubernetes strategy</p>
<h3 id="operatorruntime-controller-technology-stack">Operator/Runtime Controller technology stack</h3>
<p>As mentioned earlier within this document we are not building a fully fledged operator. Therefore we do not need to rely on an operator framework to manage CRDs etc. Based on the skillset within the DX development team we decided that the official kuberenetes client for Java is capable of everything we need and are therefore building a Java based runtime controller.</p>
<h4 id="milestone-1_9">Milestone 1</h4>
<p><strong>Summary</strong><br />
Creating a first version of the runtime controller including proper build, lint and test CI/CD. We also need a proper development setup based on maven and make files.</p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
 

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.top", "navigation.instant", "navigation.expand", "search.highlight", "search.share", "search.suggest"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.0bbba5b5.min.js", "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.649a939e.min.js"></script>
      
    
  </body>
</html>